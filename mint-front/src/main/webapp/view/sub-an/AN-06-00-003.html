<!--
	Screen ID : AN-06-00-003
	Screen NM : 전문I/O 상세
	[변경 이력]
	* 20200225-001 : New
-->

<!--location -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div id="oldPath" class="col-lg-5">
 		<h2 class="lb-change">전문I/O 상세</h2>
		<ol class="breadcrumb">
			<li><lb class="lb-9999">전문I/O 관리</lb></li>
	        <li class="active"><strong class="lb-change">전문I/O 상세</strong></li>
		</ol>
	</div>
	<div id="menuPath" class="col-lg-5">
    </div>
</div>
<!--location end-->

<!--wrapper wrapper-content-->
<div class="wrapper wrapper-content animated fadeInRight" >
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5><lb class="lb-1008"></lb></h5>
                    <div class="ibox-tools">
                    	<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
			            <a class="btn btn-w-m btn-default btn-outline btn-update"><i class="fa fa-pencil"></i> <lb class="lb-12"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-delete"><i class="fa fa-trash-o"></i> <lb class="lb-343"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-back"><i class="fa fa-reply"></i> <lb class="lb-311"></lb></a>
					</div>
				</div>

              	<div class="ibox-content">
                  	<div class="row">
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-9999">코드(CD)</lb></label>
                               		<input id="tf-dataSetCd" name="dataSetCd" type="text" class="input-tag-4 k-textbox" placeholder="">
                               		<input id="hd-dataSetId" name="hd-dataSetId" type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-9999">한글명</lb></label>
                               		<input id="tf-dataSetNm1" name="dataSetNm1" type="text" class="input-tag-4 k-textbox" placeholder="">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-9999">영문명</lb></label>
                               		<input id="tf-dataSetNm2" name="dataSetNm2" type="text" class="input-tag-4 k-textbox" placeholder="">
                              	</div>
							</div>
						</div>
						<hr class="hr-space">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="label-tag-4"><lb class="lb-9999">구분</lb></span>
								<span style="padding: 0px 0px 0px 10px;">
					            	<div class="radio radio-inline" style="padding-left:20px; padding-top:5px;">
										<span class="radio-info" style="padding-right: 10px;">
											<input id="rd-layout-y" type="radio" name="rd-layout" value="Y" checked="checked"><label for="rd-layout-y"><lb class="lb-9999">전문I/O</lb></label>
										</span>
		                                <span class="radio-danger" style="padding:0px 20px;">
		                                	<input id="rd-layout-n" type="radio" name="rd-layout" value="N"><label for="rd-layout-n"><lb class="lb-9999">복합유형</lb></label>
		                                </span>
                                	</div>
                                </span>
                            </div>
                        </div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
									<label class="label-tag-4"><lb class="lb-9999">암호화</lb></label>
									<input id="cb-encryptType" name="encryptType" type="combobox" placeholder="Select" class="input-tag-4" data-bind="value: value, events: {select: select}">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1012">길이</lb></label>
                               		<input id="tf-length" name="length" type="number" class="input-tag-4 input-tag-view k-textbox" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>

						<div style="display:none;">
						<hr class="hr-space">
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
									<label class="label-tag-4"><lb class="lb-48">유형</lb></label>
									<input id="cb-dataFormat" name="msgType" type="combobox" placeholder="Search..." class="input-tag-4" data-bind="value: value, events: {select: select}">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-9999">레코드구분자</lb></label>
                               		<input id="tf-recordDelimiter" name="recordDelimiter" type="text" class="input-tag-4 input-tag-view k-textbox delimiter" placeholder="" readonly="readonly" disabled="disabled" data-bind="disabled: isDisabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-9999">필드구분자</lb></label>
                               		<input id="tf-fieldDelimiter" name="fieldDelimiter" type="text" class="input-tag-4 input-tag-view k-textbox delimiter" placeholder="" readonly="readonly" disabled="disabled" data-bind="disabled: isDisabled">
                              	</div>
							</div>
						</div>
						</div>



						<div style="display:none;">
						<hr class="hr-space">
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-535">등록자</lb></label>
                               		<input id="tf-regUserNm"    name="regUserNm"    type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-71">등록일</lb></label>
                                	<input id="tf-regDate" name="regDate" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>
						</div>
					</div><!-- end row -->

           		</div>
           	</div>
       	</div>
   	</div>

	<div class="row">
		<div class="col-lg-12">
			<div class="tabs-container">
				<div class="tabs-lefts">
					<ul id="tab-datafield-info" class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#tab01"><lb class="lb-1009"></lb></a></li>
						<li class=""><a data-toggle="tab" href="#tab02"><lb class="lb-218"></lb></a></li>
					</ul>
					<div class="tab-content">
						<div id="tab01" class="tab-pane active">
							<div class="panel-body">

		                 		<div class="row">
		 							<div class="col-lg-12">
		 	  							<div id="gd-TreeList"></div>
			               			</div>
		    					</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="tab02" class="tab-pane">
							<div class="panel-body">
		                        <div class="row">
		                        	<div class="col-sm-12">
		                        	<textarea id="ta-description" rows="5" cols="30" style="height:200px"></textarea>
		                        	</div>
		                        </div>
								<hr class="hr-space">
								<hr class="hr-space">
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

					</div><!--  end tab-content -->
				</div><!-- end tab-position -->
			</div><!-- end tabs-container -->
       	</div><!--  end col-sm-12 -->
	</div><!-- end row -->
</div><!-- end wrapper -->


<script type="text/x-kendo-template" id="template-grid-btn-list">
	<div>
		<span id="btn-add" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_add_click()">
			<i class='fa fa-plus-square-o'></i> <lb class="lb-370"></lb></span>
		</span>
		<span id="btn-down" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_down_click()">
			<i class='fa fa-level-down'></i> <lb class="lb-1035"></lb></span>
		</span>
		<span id="btn-up" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_up_click()">
			<i class='fa fa-level-up'></i> <lb class="lb-1034"></lb></span>
		</span>
		<span id="btn-copy" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_copy_click()">
			<i class='fa fa-copy'></i> <lb class="lb-313"></lb></span>
		</span>
		<span id="btn-meta-add" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;">
			<i class='fa fa-plus-square-o'></i> <lb class="lb-1013" onclick="return $.main_detail.fn_btn_add_metafield_click()"></lb></span>
		</span>
	</div>
</script>


<script>
	$(document).ready(function(){
		//=======================================================================
		//(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
		//=======================================================================
		screenName = "AN-06-00-003";
		$.extend({
			main_detail : {
				//=======================================================================
				// (2) Screen 에서 사용할 variable 정의
				//=======================================================================
				isReadOnly : false,
				//=======================================================================
				// (3) Screen 에서 사용할 function 정의
				//=======================================================================

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화
				//-----------------------------------------------------------------------
				fn_init : function() {
					try {
						mint.init('$.main_detail.fn_initCallback');
						//mint.common.siteMenuPath(screenName);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_init"});
					}
				},//end fn_init()

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화 콜백
				//-----------------------------------------------------------------------
				fn_initCallback : function() {
					try {
						//-----------------------------------------------------------------------
						// 화면 초기화
						//-----------------------------------------------------------------------
						$.main_detail.fn_initComponent(null);

						//-----------------------------------------------------------------------
						// 샹세/수정 체크
						//-----------------------------------------------------------------------
						$.main_detail.isReadOnly = true;
						$.main_detail.dataSetId = mint.common.getScreenParam('dataSetId');

			      		if( ! mint.common.isEmpty( $.main_detail.dataSetId ) ) {
							mint.callService(null, 'AN-06-00-002', 'REST-R02-AN-06-00', '$.main_detail.fn_setDataField',
								{
							    	  errorCall : true
							    	, params : {dataSetId : $.main_detail.dataSetId}
							    }
							);
			      		}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initCallback"});
					}
				},//end fn_initCallback()

				//-----------------------------------------------------------------------
				// Description :: component 초기화
				//-----------------------------------------------------------------------
				fn_initComponent : function(options) {
					try {
						// Disabled
						$('#main_contents_detail input').each(function(){
							$(this).attr('readonly', true);
							$(this).attr('disabled', true);
							$(this).addClass('input-tag-view');
						});

						// Dropdown
						{
							// Variables
							$.main_detail.YesNoValue = [{ nm: 'Yes', cd: 'Y' }, { nm: 'No', cd: 'N' }];
							$.main_detail.encryptTypeUsedYN = true;

							// Init Binding
		 					mint.ui.setDropDownList('cb-dataFormat', mint.common.commonCodeMap.get("cds").AN11, 0, 'nm', 'cd');
		 					if( $.main_detail.encryptTypeUsedYN == true ) {
		 						mint.ui.setDropDownList('cb-encryptType', $.main_detail.YesNoValue, 0, 'nm', 'cd');
		 					} else {
		 						mint.ui.setDropDownList('cb-encryptType', mint.common.commonCodeMap.get("cds").AN08, 0, 'nm', 'cd');
		 					}

		 					// Data Selection
		 					var an11 = mint.common.getEnvValue('default.ui.an11');
		 					kendo.bind($('#cb-dataFormat'), kendo.observable({
		 						value: (!mint.common.isEmpty(an11) && an11.length > 0) ? an11[0] : '0',
		 						select: function(e) {
		 							//$.main_detail.fn_delimiterField(e.dataItem);
		 						}
		 					}));

		 					if( $.main_detail.encryptTypeUsedYN == true) {
			 					kendo.bind($('#cb-encryptType'), kendo.observable({
			 						value: 'N',
			 						select: function(e) {
			 							//TODO
			 						}
			 					}));
		 					} else {
			 					var an08 = mint.common.getEnvValue('default.ui.an08');
			 					kendo.bind($('#cb-encryptType'), kendo.observable({
			 						value: (!mint.common.isEmpty(an08) && an08.length > 0) ? an08[0] : '0',
			 						select: function(e) {
			 							//TODO
			 						}
			 					}));
		 					}

						}

						// TreeList
						$.main_detail.fn_initTreeList();

						// TextField
						$('#tf-regUserNm').val( mint.session.getUserNm() );
						$('#hd-regUserId').val( mint.session.getUserId() );
						$('#tf-regDate').val( mint.common.getTodayDate()  );

						// TextArea
						$("#ta-description").kendoEditor({
				        });
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initComponent"});
					}
				},//end fn_initComponent()


				//-----------------------------------------------------------------------
				// Description :: fn_initTreeList
				//-----------------------------------------------------------------------
				fn_initTreeList : function(jsonData) {
					try {
						var hCSSCenter = {style: 'text-align: center; vertical-align:middle;'};
						var aCSSCenter = {style: 'text-align: center; white-space: nowrap;'};
						var aCSSLeft = {style: 'text-align: left; white-space: nowrap;'};

						var locked = true;
						$("#gd-TreeList").kendoTreeList({
				          	dataSource : $.main_detail.fn_getTreeListDataSource([]),
							filterable: false,
							resizable: true,
				            sortable: false,
				            selectable: true,
				            scrollable: true,
				            editable: {
				                mode: "inline",
				            },
						    toolbar: ["excel"],
						    excel: {
						          allPages: true
						        , filterable: true
						        , fileName: mint.common.remakeYYMMDD(new Date()).substring(0, 14) + '_' + mint.label.getLabel('lb-10') + '.xlsx'
						    },
						    messages: {
						        commands: {
						          excel: mint.label.getLabel('lb-508')
						        }
						    },
							columns: [

								{
									field: "name1",
									title: mint.label.getLabel('lb-1014')+'(*)',
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked, expandable: true,
								},
								{
									field: "parentNmKo",
									title: '부모식별자(한)',
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked,
								},
								{
									field: "requiredYn",
									title:  '필수',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "80px", locked: locked,
								},
								{
									field: "metaYn",
									title: '메타체크',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "80px", locked: locked,
								},
								{
									field: "name2",
									title: mint.label.getLabel('lb-1015'),
									headerAttributes: hCSSCenter, attributes: aCSSLeft,
									width: "130px", locked: locked
								},
								{
									field: "parentNmEn",
									title: '부모식별자(영)',
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked,
								},
								{
									field: "type",
									title:  mint.label.getLabel('lb-48'),
									template: '#=typeNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px", locked: locked,
								},
								{
									field: "length",
									title: mint.label.getLabel('lb-1012'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
								},
								{
									field: "scale",
									title: 'SCALE',
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
								},
								{
									field: "offset",
									title: mint.label.getLabel('lb-1016'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
									hidden: true,
								},
								{
									field: "defaultValue",
									title: mint.label.getLabel('lb-1017'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
								},
								{
									field: "justify",
									title: mint.label.getLabel('lb-1023'),
									template: '#=justifyNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},
								{
									field: "padding",
									title: mint.label.getLabel('lb-1024'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "95px",
								},
								{
									field: "encryptType",
									title: mint.label.getLabel('lb-1018'),
									template: '#=encryptTypeNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},
								{
									field: "koreanYn",
									title: '한글여부',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
								},
								{
									field: "decimalPointYn",
									title: '소수점포함여부',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},

								{
									field: "maskingYn",
									title: '마스킹여부',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									editor: mint.ui.gridEditorYesOrNoComboBox,
									width: "100px",
								},
								{
									field: "maskingPatternCd",
									title: '마스킹패턴코드',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "150px",
								},
								{
									field: "comments",
									title: '비고',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "200px",
								},

								{
									field: "isLengthField",
									title: mint.label.getLabel('lb-1019'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
									hidden: true,
								},
								{
									field: "hasRepeatCountField",
									title: mint.label.getLabel('lb-1020'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
									hidden: true,
								},
								{
									field: "repeatFieldId",
									title: mint.label.getLabel('lb-1021'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
									hidden: true,
								},
								{
									field: "repeatCount",
									title: mint.label.getLabel('lb-1022'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
									hidden: true,
								},
								{ field : "id", hidden : true },

							],
							beforeEdit: function(e) {
							},
							edit: function(e) {
							},
 							change: function(e) {
							},
							dataBound: function (e) {
								mint.ui.gridVerticalScrollBar(e);
								//-----------------------------------------------------------------------
								// ROW / COL CSS 처리
								//-----------------------------------------------------------------------
								var items = e.sender.dataItems();
								if( items.length > 0 ) {
									for(var i = 0; i < items.length; i++ ) {
										var trTotal = e.sender.wrapper.find("tr[data-uid='" + items[i].uid + "']");
										trTotal.removeClass('k-alt');
									}
								}
 							},
 							dataBinding: function(e) {
 							},
							collapse: function(e) {
							},
							beforeEdit: function(e) {
							},
							save: function(e) {
							},
							saveChanges: function(e) {
							},
							remove: function(e) {
							},
							cancel: function(e) {
							},
							dragend: function(e) {
							}
						});
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initTreeList"});
					}
				},//end fn_initTreeList()

				//-----------------------------------------------------------------------
				// Description :: fn_getTreeListDataSource
				//-----------------------------------------------------------------------
				fn_getTreeListDataSource : function(jsonData) {
					try {
						var	dataSource = new kendo.data.TreeListDataSource({
								data: jsonData,
							    schema: {
							    	model: $.main_detail.fn_getTreeListModel()
							    },
							});
						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getTreeListDataSource"});
					}
				},//end fn_getTreeListDataSource()

				//-----------------------------------------------------------------------
				// Description :: fn_getTreeListModel
				//-----------------------------------------------------------------------
				fn_getTreeListModel : function() {
					try {
						var model = {
							id: "id",
							parentId: "parentId",
		            		fields: {
		            			objectType: {type: "string", editable:false, nullable:false, defaultValue: "DataField"},
		            			id: {type: "string", editable:true, nullable: false},
		            			dataSetId:   {type: "string", editable:false, nullable: false, defaultValue: ""},
		            			dataFieldId: {type: "string", editable:false, nullable: false, defaultValue: ""},
		            			parentId: {type: "string", editable:true, nullable: true},
		            			seq:         {type: "string", editable: false, nullable: false, defaultValue: ""},
			            		name1:       {type: "string", editable: true, nullable: false, defaultValue: "", validation: { required: true }},
			            		name2:       {type: "string", editable: true, nullable: false, defaultValue: "", validation: { required: true }},
			            		cd:          {type: "string", editable: false, nullable: true, defaultValue: ""},
			            		type:        {type: "string", editable: true, nullable: false, defaultValue: ""},
			            		typeNm:      {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			length:      {type: "number", validation: { required: true, min: 0} , editable: true, nullable: false, defaultValue: 0},
			            		offset:      {type: "number", validation: { required: true, min: 0, step: 1, format: 'n0', decimals: 1 } , editable: true, nullable: false, defaultValue: 0},
		            			encryptType : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			encryptTypeNm : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			isLengthField : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatCount : {type: "number", validation: { required: true, min: 0} , editable: true, nullable: false, defaultValue: 0},
		            			hasRepeatCountField : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatFieldId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatDataSetId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			defaultValue: {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			justify : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			justifyNm : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			padding : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			fieldSetId:  {type: "string", editable:false, nullable: true, defaultValue: ""},

		            			refDataSetId:  {type: "string", editable:true, nullable: true, defaultValue: ""},
		            			refDataFieldId:  {type: "string", editable:true, nullable: true, defaultValue: ""},
		            			parentNmKo:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			parentNmEn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			requiredYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			scale:	{type: "number", validation: { required: false, min: 0}, editable: true, nullable: false, defaultValue: 0},
		            			koreanYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			metaYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			decimalPointYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},

		            			maskingYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			maskingPatternCd:{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			comments:	{type: "string", editable: true, nullable: true, defaultValue: ""},

		            			regDate : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			regId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			modDate : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			modId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            		},
		            		expanded: true
						};

						var TreeListModel = new kendo.data.TreeListModel.define(model);
						return TreeListModel;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getTreeListModel"});
					}
				}, //end fn_getTreeListModel()


				//-----------------------------------------------------------------------
				// Description :: fn_setDataField
				//-----------------------------------------------------------------------
				fn_setDataField : function(jsonData) {
					try {

						if( !mint.common.isEmpty(jsonData) ) {
							// Layer 1
							$('#hd-dataSetId').val( jsonData.dataSetId );
							$('#tf-dataSetCd').val( jsonData.cd );
							$('#tf-dataSetNm1').val( jsonData.name1 );
							$('#tf-dataSetNm2').val( jsonData.name2 );

							// Layer 2
							$('input:radio[name=rd-layout]:input[value=' + jsonData.isRoot + ']').prop('checked', true);
							$('#cb-encryptType').data('kendoDropDownList').value(jsonData.encryptType);
							$('#tf-length').val( jsonData.length );

							// Layer 3
							$('#cb-dataFormat').data('kendoDropDownList').value(jsonData.dataFormat);
							$('#tf-recordDelimiter').val(jsonData.recordDelimiter);
							$('#tf-fieldDelimiter').val(jsonData.fieldDelimiter);


							$('#tf-regUserNm').val( jsonData.regUser.userNm);
							$('#tf-regDate').val( mint.common.isEmpty( jsonData.modDate ) ? '' : mint.common.formatDate(jsonData.modDate) );

							// TreeList
							var dataFieldList = jsonData.dataFieldList;
							var dataSource = $.main_detail.fn_getTreeListDataSource(dataFieldList);
							var treeList = $("#gd-TreeList").data('kendoTreeList');
							treeList.setDataSource(dataSource);

							//-----------------------------------------------------------------------
							// Description
							//-----------------------------------------------------------------------
							$("#ta-description").data("kendoEditor").value(jsonData.comments);
							$($('#ta-description').data().kendoEditor.body).prop('contenteditable', false);
							$($('#ta-description').data().kendoEditor.body).prop('disabled', true);

						} else {
							mint.common.alert('CW00019', 'Layout');
							mint.back(null);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setDataField"});
					}
				},//end fn_setDataField()

				//-----------------------------------------------------------------------
				// Description :: DataSet  삭제
				//-----------------------------------------------------------------------
				fn_dataSetDelete : function() {
					try {

						var confirmCheck = mint.common.confirm('CI00003');
						if(confirmCheck) {
							mint.callService(null, screenName, 'REST-D01-AN-06-00'
								,function(jsonData) {
									mint.common.alert('CI00103', null);
						      		mint.move('../sub-an/AN-06-00-001');
								}
								,{
									 errorCall : false
									,params : { dataSetId : $.main_detail.dataSetId }
								}
							);
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_dataSetDelete"});
					}
				},//end fn_dataSetDelete()

				//-----------------------------------------------------------------------
				// Description :: fn_delete
				//-----------------------------------------------------------------------
				fn_delete : function() {
					try {
						if( $.main_detail.fn_isModifyer() ) {

							mint.callService(null, screenName, 'REST-R06-AN-06-00', function(responseData) {
									if( !mint.common.isEmpty(responseData) && responseData == 0 ) {
										$.main_detail.fn_dataSetDelete();
									} else {
										mint.common.alert('전문I/O 코드[' + $("#tf-dataSetCd").val() + '] 가 인터페이스에서 사용중입니다\n인터페이스에서 레이이웃 초기화 후 삭제 하세요.');//TODO::Message
										return;
									}
								},
								{
									  errorCall : true
									, notificationView : false
									, params 	: {dataSetId : $("#hd-dataSetId").val()}
								}

							);
						} else {
							mint.common.alert('CW00007', null);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_delete"});
					}
				},//end fn_save()

				//-----------------------------------------------------------------------
				// Description :: fn_update
				//-----------------------------------------------------------------------
				fn_update : function() {
					try {
						if($.main_detail.fn_isModifyer()) {
							mint.setDetailView("Y");
							mint.common.setScreenParam("isModify", true);
							mint.common.setScreenParam('dataSetId', $('#hd-dataSetId').val());
							mint.move('../sub-an/AN-06-00-002');
						} else {
							mint.common.alert('CW00007', null);
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_update"});
					}
				},//end fn_update()

				//-----------------------------------------------------------------------
				// Description :: 수정 삭제 및 심의 가능 여부 체크
				//-----------------------------------------------------------------------
				fn_isModifyer : function() {
					try {
						var isModifyer = false;
						//등록자 및 어드민 검사
						if($('#hd-regUserId').val() == mint.session.getUserId() || mint.session.isInterfaceAdmin() == 'Y') {
							isModifyer = true;
						}
						return isModifyer;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isModifyer"});
					}
				},//end fn_isModifyer()

			}// end main
		});// end extends

		//=======================================================================
		// (4) 이벤트 핸들러 정의
		//=======================================================================

		//-----------------------------------------------------------------------
		// Description :: 이전 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-back').on('click', function(e) {
			mint.back(null);
		});

		//-----------------------------------------------------------------------
		// Description :: 삭제 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-delete').on('click', function(e) {
			$.main_detail.fn_delete();
		});

		//-----------------------------------------------------------------------
		// Description :: 수정 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-update').on('click', function(e) {
			$.main_detail.fn_update();
        });

		//=======================================================================
		// (5) 기타 Function 정의
		//=======================================================================

		//=======================================================================
		// (6) 화면 로딩시 실행할 항목 기술
		//=======================================================================
		$.main_detail.fn_init();
		mint.label.attachLabel(null);

	});
</script>